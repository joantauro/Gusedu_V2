<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../plantillas/PlantillaPrincipal.xhtml">

            <ui:define name="titulo">
                Calendario de Citas
            </ui:define>

            <ui:define name="top">
              
            </ui:define>

            <ui:define name="content">
      
           <p:growl id="messages" showDetail="true" />
           
           <p:panelGrid columns="2" >
               <h:form>
                         <h:panelGrid columnClasses="value">
        <h3 style="margin-top: 0">Calendario de Citas</h3>
        <p:schedule id="schedule" value="#{scheduleView.eventModel}" view="agendaWeek"
                    widgetVar="myschedule" timeZone="GMT-5" locale="es"   >

            <p:ajax  event="dateSelect" listener="#{scheduleView.onDateSelect}" update=":#{p:component('eventDetails')}" oncomplete="PF('eventDialog').show();" />
            <p:ajax event="eventSelect" listener="#{scheduleView.onEventSelect}" update=":#{p:component('eventDetails')}" oncomplete="PF('eventDialog').show();" />
            <p:ajax event="eventMove" listener="#{scheduleView.onEventMove}" update=":#{p:component('messages')}" />
            <p:ajax event="eventResize" listener="#{scheduleView.onEventResize}" update=":#{p:component('messages')}" />
 
        </p:schedule>
    </h:panelGrid>
               </h:form>
              
               <h:form>
                   <p:selectOneListbox id="basic" value="#{scheduleView.codigo}" filter="true" filterMatchMode="contains" style="width: 300px;" scrollHeight="600"  >
                       <f:selectItems value="#{pacienteBean.clientes}" var="theme" 
                                      itemLabel="#{theme.persona.perNombres} #{theme.persona.perApellidoP} #{theme.persona.perApellidoM}" 
                                      itemValue="#{theme.cliCodigo}" />
                       <p:ajax    listener="#{scheduleView.paciente()}" /> 
                   </p:selectOneListbox>
             
               </h:form>
          
               
           </p:panelGrid>
         
          
           <h:form>
                <p:dialog widgetVar="eventDialog" header="Detalle de Cita" showEffect="clip" hideEffect="clip">
        <h:panelGrid id="eventDetails" columns="2">
            <p:outputLabel for="title" value="Paciente : " />
            <p:outputLabel id="title" value="#{scheduleView.cli.persona.perNombres} #{scheduleView.cli.persona.perApellidoP} #{scheduleView.cli.persona.perApellidoM}"  />
 
            <p:outputLabel for="from" value="Desde :" />
            <p:calendar id="from" value="#{scheduleView.visita.visFecCreacion}" timeZone="GMT-5" pattern="dd/MM/yyyy HH:mm"/>
 
            <p:outputLabel for="to" value="Hasta :" />
            <p:calendar id="to" value="#{scheduleView.visita.visFecFin}" timeZone="GMT-5" pattern="dd/MM/yyyy HH:mm"/>
 

 
            <p:commandButton type="reset" value="Reset" />
            <p:commandButton id="addButton" value="Save" actionListener="#{scheduleView.addEvent}" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
        </h:panelGrid>
    </p:dialog>   
           </h:form> 
          
           <script type="text/javascript">
		PrimeFaces.locales["es"] = {
			    closeText: "Cerrar",
			    prevText: "Anterior",
			    nextText: "Siguiente",
			    monthNames: ["Enero","Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
			    monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
			    dayNames: ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"],
			    dayNamesShort: ["Dom", "Lun", "Mar", "Mie", "Jue", "Vie", "Sab"],
			    dayNamesMin: ["Do", "Lu", "Ma", "Mi", "Ju", "Vi", "Sa"],
			    weekHeader: "Semana",
			    firstDay: 0,
			    isRTL: false,
			    showMonthAfterYear: false,
			    yearSuffix: "",
			    timeOnlyTitle: "Solo hora",
			    timeText: "Tiempo",
			    hourText: "Hora",
			    minuteText: "Minuto",
			    secondText: "Segundo",
			    currentText: "Fecha actual",
			    ampm: false,
			    month: "Mes",
			    week: "Semana",
			    day: "Día",
			    allDayText : "Todo el día"
			};
</script>
<style type="text/css">
    .value {
        width: 650px;
    }
</style>
            </ui:define>

            <ui:define name="bottom">
             
            </ui:define>

        </ui:composition>

    </body>
</html>
